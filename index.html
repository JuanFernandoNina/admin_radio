<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radio App - Panel Admin</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-screen">
        <div class="login-container">
            <div class="login-header">
                <div class="logo-icon"><i class="fas fa-broadcast-tower"></i></div>
                <h1>Panel de Administración</h1>
                <p class="subtitle">Radio App</p>
            </div>
            <div class="login-body">
                <div id="loginError" class="error"></div>
                <form id="loginForm">
                    <div class="form-group">
                        <label>Usuario</label>
                        <input type="email" id="email" placeholder="admin@radio.com" required>
                    </div>
                    <div class="form-group">
                        <label>Contraseña</label>
                        <input type="password" id="password" placeholder="••••••" required>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-sign-in-alt"></i>
                        <span>Iniciar Sesión</span>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Dashboard -->
    <div id="dashboard" class="dashboard">
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" onclick="toggleSidebar()">
            <i class="fas fa-bars"></i>
        </button>

        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-broadcast-tower"></i>
                    <span>Radio App</span>
                </div>
                <button class="menu-toggle" onclick="toggleSidebar()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" onclick="showTab('content')">
                    <span class="nav-icon"><i class="fas fa-music"></i></span>
                    <span class="nav-text">Contenido</span>
                </a>
                <a href="#" class="nav-item" onclick="showTab('categories')">
                    <span class="nav-icon"><i class="fas fa-tags"></i></span>
                    <span class="nav-text">Categorías</span>
                </a>
                <a href="#" class="nav-item" onclick="showTab('carousel')">
                    <span class="nav-icon"><i class="fas fa-images"></i></span>
                    <span class="nav-text">Carrusel</span>
                </a>
                <a href="#" class="nav-item" onclick="showTab('events')">
                    <span class="nav-icon"><i class="fas fa-calendar-alt"></i></span>
                    <span class="nav-text">Eventos</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <button class="btn btn-danger logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Cerrar Sesión</span>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="content-header">
                <h1 id="pageTitle"><i class="fas fa-music"></i> Contenido</h1>
                <div class="header-actions">
                    <button id="addContentBtn" class="btn btn-success" onclick="openAddContentModal()">
                        <i class="fas fa-plus"></i> Agregar Contenido
                    </button>
                    <button id="addCategoriesBtn" class="btn btn-success" onclick="openAddCategoryModal()" style="display: none;">
                        <i class="fas fa-plus"></i> Agregar Categoría
                    </button>
                    <button id="addCarouselBtn" class="btn btn-success" onclick="openAddCarouselModal()" style="display: none;">
                        <i class="fas fa-plus"></i> Agregar Banner
                    </button>
                    <button id="addEventsBtn" class="btn btn-success" onclick="openAddEventModal()" style="display: none;">
                        <i class="fas fa-plus"></i> Agregar Evento
                    </button>
                </div>
            </div>

            <!-- Search and Filters -->
            <div class="search-filters">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchInput" placeholder="Buscar..." onkeyup="handleSearch()">
                </div>
                <div class="filters">
                    <select id="statusFilter" onchange="handleFilter()">
                        <option value="">Todos los estados</option>
                        <option value="active">Activos</option>
                        <option value="inactive">Inactivos</option>
                    </select>
                    <select id="sortFilter" onchange="handleSort()">
                        <option value="newest">Más recientes</option>
                        <option value="oldest">Más antiguos</option>
                        <option value="name">Por nombre</option>
                    </select>
                </div>
            </div>

            <div class="content-body">
                <!-- Content Tab -->
                <div id="contentTab" class="tab-content active">
                    <div id="contentList" class="loading">Cargando contenido...</div>
                    <div class="pagination-container" id="contentPagination"></div>
                </div>

                <!-- Categories Tab -->
                <div id="categoriesTab" class="tab-content">
                    <div id="categoryList" class="loading">Cargando categorías...</div>
                    <div class="pagination-container" id="categoryPagination"></div>
                </div>

                <!-- Carousel Tab -->
                <div id="carouselTab" class="tab-content">
                    <div id="carouselList" class="loading">Cargando banners...</div>
                    <div class="pagination-container" id="carouselPagination"></div>
                </div>

                <!-- Events Tab -->
                <div id="eventsTab" class="tab-content">
                    <div id="eventList" class="loading">Cargando eventos...</div>
                    <div class="pagination-container" id="eventPagination"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modales (se mantienen igual pero con iconos actualizados) -->
    <div id="contentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="contentModalTitle"><i class="fas fa-music"></i> Agregar Contenido</h2>
                <button class="close-btn" onclick="closeModal('contentModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="contentForm">
                    <input type="hidden" id="contentId">
                    <div class="form-group">
                        <label>Título *</label>
                        <input type="text" id="contentTitle" required>
                    </div>
                    <div class="form-group">
                        <label>Descripción</label>
                        <textarea id="contentDescription"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Categoría</label>
                        <select id="contentCategory"><option value="">Sin categoría</option></select>
                    </div>
                    <div class="form-group">
                        <label>URL de Miniatura</label>
                        <input type="url" id="contentThumbnail">
                    </div>
                    <div class="form-group">
                        <label>URL de Audio</label>
                        <input type="url" id="contentAudio">
                    </div>
                    <div class="form-group">
                        <label>URL de Video</label>
                        <input type="url" id="contentVideo">
                    </div>
                    <div class="form-group">
                        <label><input type="checkbox" id="contentActive" checked> Activo</label>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn btn-success"><i class="fas fa-save"></i> Guardar</button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal('contentModal')">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Los otros modales siguen la misma estructura con iconos Font Awesome -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="categoryModalTitle"><i class="fas fa-tags"></i> Agregar Categoría</h2>
                <button class="close-btn" onclick="closeModal('categoryModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="categoryForm">
                    <input type="hidden" id="categoryId">
                    <div class="form-group">
                        <label>Nombre *</label>
                        <input type="text" id="categoryName" required>
                    </div>
                    <div class="form-group">
                        <label>Color (hex)</label>
                        <input type="text" id="categoryColor" placeholder="#FF5722">
                    </div>
                    <div class="form-group">
                        <label>Ícono</label>
                        <input type="text" id="categoryIcon" placeholder="music_note">
                    </div>
                    <div class="form-group">
                        <label>Pantalla *</label>
                        <select id="categoryScreen" required>
                            <option value="">Selecciona</option>
                            <option value="home">Inicio</option>
                            <option value="grupos">Grupos</option>
                            <option value="both">Ambas</option>
                        </select>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn btn-success"><i class="fas fa-save"></i> Guardar</button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal('categoryModal')">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="carouselModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="carouselModalTitle"><i class="fas fa-images"></i> Agregar Banner</h2>
                <button class="close-btn" onclick="closeModal('carouselModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="carouselForm">
                    <input type="hidden" id="carouselId">
                    <div class="form-group">
                        <label>Título *</label>
                        <input type="text" id="carouselTitle" required>
                    </div>
                    <div class="form-group">
                        <label>Descripción</label>
                        <textarea id="carouselDescription"></textarea>
                    </div>
                    <div class="form-group">
                        <label>URL de Imagen *</label>
                        <input type="url" id="carouselImage" required>
                    </div>
                    <div class="form-group">
                        <label>Orden</label>
                        <input type="number" id="carouselOrder" value="0">
                    </div>
                    <div class="form-group">
                        <label><input type="checkbox" id="carouselActive" checked> Activo</label>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn btn-success"><i class="fas fa-save"></i> Guardar</button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal('carouselModal')">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div id="eventModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="eventModalTitle"><i class="fas fa-calendar-alt"></i> Agregar Evento</h2>
                <button class="close-btn" onclick="closeModal('eventModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="eventForm">
                    <input type="hidden" id="eventId">
                    <div class="form-group">
                        <label>Título *</label>
                        <input type="text" id="eventTitle" required>
                    </div>
                    <div class="form-group">
                        <label>Descripción</label>
                        <textarea id="eventDescription"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Fecha *</label>
                        <input type="date" id="eventDate" required>
                    </div>
                    <div class="form-group">
                        <label>Hora inicio</label>
                        <input type="time" id="eventStartTime">
                    </div>
                    <div class="form-group">
                        <label>Hora fin</label>
                        <input type="time" id="eventEndTime">
                    </div>
                    <div class="form-group">
                        <label>URL Imagen</label>
                        <input type="url" id="eventImage">
                    </div>
                    <div class="form-group">
                        <label><input type="checkbox" id="eventReminder"> Recordatorio</label>
                    </div>
                    <div class="form-group">
                        <label><input type="checkbox" id="eventActive" checked> Activo</label>
                    </div>
                    <div class="btn-group">
                        <button type="submit" class="btn btn-success"><i class="fas fa-save"></i> Guardar</button>
                        <button type="button" class="btn btn-secondary" onclick="closeModal('eventModal')">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>